<!doctype html>
<html>
<head>
<meta charset="utf-8">
<title>Oppgaver Kapitell 11</title>
</head>

<body>
	<script>
		//lager Arrayen for holde styr på brikkene
		var trePaaRad = [
			["_", "_", "_"],
			["_", "_", "_"],
			["_", "_", "_"]
		];
		
		//Funksjon for sjekke om heltall
		function isInt(a) {
			return a % 1 == 0;
		}
		
		var bruker = "o";
		//Selve spillet
		function legg(x,y) {
			//Fjerner gammele meldinger
			console.clear();
			
			//Sjekker om tallene er innenfor brette
			if((x < 1 || x > 3) || (y < 1 || y > 3)) {
				
				return "Kan ikke legge på " + x + ", " + y + " siden det er utenfor brette! (1-3)";
				
			} else if((typeof(x) == "number") && (typeof(y) == "number") && isInt(x) && isInt(y)) {
				//Om tallene er innenfor brette og heletall kjører denne koden
				
				//Sjekker om plassen er ledig
				if(trePaaRad[y-1][x-1] == "_") {
					//Legger inn "klossen" til brukeren
					trePaaRad[y-1][x-1] = bruker;
					
					//Skriver ut hver rad hver for seg, slik at ikke klumpes i konsollen
					for(i = 0; i < 3; i++) {
						console.log(trePaaRad[i]);	
					}
					
					//Sjekker om spilleren vinner
					var vinn = false;
					
					for(i = 0; i < 3; i++) {
						
						//Sjekker horisontalt
						if((trePaaRad[i][0] == trePaaRad[i][1]) && (trePaaRad[i][1] == trePaaRad[i][2]) 
						   && (trePaaRad[i][0] != "_")) {
							
							vinn = true;
							
						} 
						
						//Sjekker vertikalt
						else if((trePaaRad[0][i] == trePaaRad[1][i]) && (trePaaRad[1][i] == trePaaRad[2][i]) && (trePaaRad[0][i] != "_")) {
							
							vinn = true;
							
						}
						
						//Sjekker skrått
						else if((trePaaRad[i][0] == trePaaRad[1][1]) && (trePaaRad[1][1] == trePaaRad[2][2-i]) && (trePaaRad[i][0] != "_")) {
							
							vinn = true;
							
						}
					
							
					}
					
					if(vinn == "true") {
						//Om vinn er true kjøres denne koden
						
						//Starter brette på nytt
						trePaaRad = [
							["_", "_", "_"],
							["_", "_", "_"],
							["_", "_", "_"]
						];
						
						return "Grattulerer spiller " + bruker + "!!!";
						
					} else if(String(trePaaRad).indexOf("_") == -1) {
						//Hvis "_" ikke finnes betyr det at alle plassene er brukt
						
						//Starter brette på nytt
						trePaaRad = [
							["_", "_", "_"],
							["_", "_", "_"],
							["_", "_", "_"]
						];
						
						return "Uavgjort, bruk legg() for starte ny runde!";
						
					} else {
						//Om ikke vunnet eller alt er spilt bytt person
						
						//Endrer bruker for hver runde
						if(bruker == "o") {
							bruker = "x";
						} else {
							bruker = "o";
						}
						
						return bruker + " sin tur!";
					}
					
				} else {
					//Om det legges på en plass som ikke er ledig, returneres denne meldingen
					return "Denne plassen er tatt allerede";
				}
				
			} else {
				//Om det ikke er heltall vil man få denne feilmeldingen
				return "Spillet aksepterer bare hele tall fra 1 til 3";
				
			}
		}
		
		function regler() {
			//Fjerner logen
			console.clear();
			
			//Skriver ut reglene
			console.log("Tre på rad går ut på å legge 3 brikker på rad");
			console.log("Enten om det er horisontalt, vertikalt eller på skrå");
			console.log("Spillet foregår i et rutenett på 3x3:");
			console.log("");
			console.log('["_","_","_"]');
			console.log('["_","_","_"]');
			console.log('["_","_","_"]');
			console.log("");
			console.log("Man leger en kloss per runde, og den som starter legger en o");
			console.log("Neste mann leger en x");
			console.log("Det er ikke lov til lege en kloss hvor det allerede er en");
			
			//Gir en siste lykke til
			return "Lykke til!";
		}
		
		//Skriver ut en velkomst til de som skal spille
		console.log("Tre på rad");
		console.log("Velkommen til tre på rad, for å legge en brike bruk kommandoen legg(x,y)");
		console.log("Om du er ny til spillet bruk kommandoen regler()");
		console.log("Lykke til");
	</script>
</body>
</html>
